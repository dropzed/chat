# Чат-приложение на Socket.IO: Руководство

## Общее описание
Демонстрационное веб-приложение для обмена сообщениями в реальном времени, построенное на технологии Socket.IO. Приложение поддерживает множественные подключения пользователей, интерактивный обмен сообщениями и мгновенные уведомления о действиях участников.

## Установка и запуск
1. Установите необходимые зависимости: `npm install`
2. Запустите сервер: `npm start`
3. Откройте приложение в браузере: http://localhost:3000

## Основные функции
- Персонализированный вход с уникальными именами пользователей
- Обмен сообщениями в реальном времени
- Индикация набора текста участниками
- Уведомления о подключении и отключении пользователей
- Автоматическое переподключение при разрыве соединения

## Принцип работы

### Инициализация и аутентификация
- При загрузке страницы пользователь вводит уникальное имя
- Вызов функции `setUsername` устанавливает WebSocket-соединение
- Сервер обрабатывает событие `add user`:
    - Сохраняет идентификатор пользователя в сессии сокета
    - Увеличивает счетчик активных пользователей (`numUsers`)
    - Отправляет подтверждение входа (`login`) с текущим количеством участников
    - Рассылает уведомление `user joined` всем подключенным клиентам

### Система обмена сообщениями

#### Индикация набора текста
- При вводе текста клиент отправляет событие `updateTyping`
- Если сообщение не отправлено в течение заданного времени, сервер рассылает уведомление `typing` с именем пользователя
- По завершению ввода отправляется событие `stop typing` для снятия индикации

#### Отправка сообщений
- При нажатии Enter клиент генерирует событие `sendMessage`
- Сервер принимает и транслирует сообщение через событие `new message`
- Все клиенты отображают полученное сообщение в интерфейсе чата

### Управление подключениями

#### Обработка отключений
- При разрыве соединения сервер фиксирует событие `disconnect`
- Уменьшается счетчик активных пользователей
- Рассылается уведомление `user left` с именем отключившегося пользователя

#### Восстановление соединения
- При успешном переподключении автоматически выполняется повторная аутентификация
- В случае неудачного переподключения отображается соответствующее уведомление

## Система событий

### Клиентские события
- `add user` - регистрация нового пользователя
- `new message` - отправка сообщения
- `typing` - индикация набора текста
- `stop typing` - завершение набора текста

### Серверные события
- `login` - подтверждение успешного входа
- `user joined` - уведомление о новом участнике
- `user left` - уведомление об отключении участника
- `user connected` - информация о подключенных пользователях

## Диагностика и отладка
Для мониторинга работы приложения используйте инструменты разработчика браузера:
- Вкладка "Network" → фильтр "WS" для просмотра WebSocket-соединения
- Вкладка "Messages" для анализа отправляемых и получаемых событий
- Просмотр событий аутентификации, обмена сообщениями и уведомлений о состоянии подключения
